<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Arcade Hub ‚Äì BTS CIEL</title>

<link rel="icon" type="image/jpeg" href="logo 2.png">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">

<style>
  :root {
    --glass-panel: rgba(255, 255, 255, 0.25);
    --glass-card: rgba(255, 255, 255, 0.45);
    --glass-border: rgba(255, 255, 255, 0.4);
    --text-primary: #1d1d1f;
    --text-secondary: #48484a;
    --accent-blue: #0071e3;
  }

  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
    font-family: 'Inter', sans-serif;
    user-select: none;
  }

  body {
    background-color: #2c3e50;
    display: flex;
    justify-content: center;
    align-items: center;
    perspective: 1200px;
  }

  /* FOND PARALLAXE */
  #bg-layer {
    position: absolute;
    top: -5%; left: -5%; width: 110%; height: 110%;
    background: url("fond_lycee.jpg") no-repeat center center;
    background-size: cover;
    filter: blur(14px);
    z-index: -1;
    transition: transform 0.05s linear;
  }

  #bg-overlay {
    position: absolute; inset: 0;
    background: linear-gradient(135deg, rgba(30, 41, 59, 0.4), rgba(0,0,0,0.2));
    z-index: -1;
    pointer-events: none;
  }

  /* --- GRAND PANNEAU CENTRAL --- */
  #main-wrapper {
    width: 95%; max-width: 1100px; height: 92%;
    background: var(--glass-panel);
    backdrop-filter: blur(30px) saturate(180%);
    -webkit-backdrop-filter: blur(30px) saturate(180%);
    border-radius: 24px;
    border: 1px solid var(--glass-border);
    box-shadow: 
      0 40px 80px rgba(0,0,0,0.25), 
      inset 0 1px 1px rgba(255,255,255,0.4);
    display: flex; flex-direction: column;
    position: relative; z-index: 10;
    overflow: hidden;
    transition: transform 0.1s ease-out;
  }

  /* HEADER */
  .header {
    padding: 18px 20px; text-align: center;
    border-bottom: 1px solid rgba(255,255,255,0.2);
    background: linear-gradient(to bottom, rgba(255,255,255,0.2), rgba(255,255,255,0.05));
    flex-shrink: 0;
  }
  #logo {
    height: 72px; margin-bottom: 8px;
    filter: drop-shadow(0 4px 10px rgba(0,0,0,0.15));
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  #logo:hover { transform: scale(1.1) rotate(5deg); }
  
  .header h1 { font-size: 26px; font-weight: 800; margin: 0; color: #1d1d1f; letter-spacing: -0.8px; }
  
  #greeting-text { 
    font-size: 12px; color: #333; font-weight: 600; margin: 4px 0 0 0; 
    text-transform: uppercase; letter-spacing: 1.2px; opacity: 0.7; 
  }

  /* CONTENT */
  .content-area {
    flex: 1; overflow-y: auto; padding: 30px;
    scrollbar-width: none;
  }
  .content-area::-webkit-scrollbar { display: none; }

  .games-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(440px, 1fr));
    gap: 24px;
  }

  /* --- CARTE JEU --- */
  .game-card {
    background: var(--glass-card);
    border: 1px solid rgba(255,255,255,0.6);
    border-radius: 22px;
    padding: 0;
    display: grid;
    grid-template-columns: 1fr 160px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    position: relative;
    overflow: hidden;
  }

  .game-card::after {
    content: ''; position: absolute; top: 0; left: -150%; width: 60%; height: 100%;
    background: linear-gradient(to right, transparent, rgba(255,255,255,0.5), transparent);
    transform: skewX(-25deg);
    transition: none; pointer-events: none;
  }
  .game-card:hover::after { left: 200%; transition: 0.6s ease-in-out; }

  .game-card:hover {
    transform: translateY(-6px) scale(1.01);
    background: rgba(255, 255, 255, 0.7);
    box-shadow: 0 20px 40px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5);
  }

  .card-content { padding: 22px; display: flex; flex-direction: column; justify-content: space-between; }
  
  .card-head { display: flex; align-items: center; gap: 14px; }
  
  .icon-box {
    width: 48px; height: 48px; border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    font-weight: 900; font-size: 24px; color: #fff;
    box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    text-shadow: 0 2px 0 rgba(0,0,0,0.1);
  }

  .card-titles h3 { margin: 0; font-size: 19px; font-weight: 800; color: #1d1d1f; }
  .card-titles span { font-size: 11px; text-transform: uppercase; color: #666; font-weight: 700; letter-spacing: 0.5px; }

  .score-box {
    margin-top: 12px;
    background: rgba(255,255,255,0.4);
    border-radius: 8px;
    padding: 6px 12px;
    display: flex; align-items: center; justify-content: space-between;
    font-size: 11px; font-family: 'JetBrains Mono', monospace; color: #333;
    border: 1px solid rgba(255,255,255,0.5);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.03);
  }
  .score-val { font-weight: 800; color: var(--accent-blue); letter-spacing: -0.5px; font-size: 12px; }

  .card-desc {
    font-size: 13px; line-height: 1.45; color: #444; margin: 14px 0;
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-weight: 500;
  }

  .play-btn {
    align-self: flex-start;
    background: var(--accent-blue);
    color: #fff; border: none; padding: 10px 22px; border-radius: 30px;
    font-size: 12px; font-weight: 700; text-transform: uppercase;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 113, 227, 0.3);
    transition: all 0.2s;
    display: flex; align-items: center; gap: 8px;
  }
  .play-btn:hover { background: #0077ED; transform: translateY(-1px); box-shadow: 0 6px 15px rgba(0, 113, 227, 0.4); }
  .play-btn:active { transform: translateY(1px); }

  .card-visual {
    background-color: rgba(0,0,0,0.03);
    background-size: cover; background-position: center;
    position: relative;
    border-left: 1px solid rgba(255,255,255,0.5);
  }
  .card-visual div { 
    position: absolute; inset: 0; background-size: cover; background-position: center bottom; 
    z-index: 1; transition: transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1); 
  }
  .game-card:hover .card-visual div { transform: scale(1.08); }

  .t-tetris { background: linear-gradient(135deg, #3498db, #2980b9); }
  .v-tetris { background-image: url("CaseTetris.gif"); }
  
  .t-arkanoid { background: linear-gradient(135deg, #e74c3c, #c0392b); }
  .v-arkanoid { background-image: url("CaseArkanoid.gif"); }
  
  /* VOLTLINK : CORRIG√â (Uniformis√©) */
  .t-volt { background: linear-gradient(135deg, #f1c40f, #f39c12); }
  .v-volt { background-image: url("VoltLink.gif"); }
  
  .t-bubble { background: linear-gradient(135deg, #9b59b6, #8e44ad); }
  .v-bubble { background-image: url("CaseBubble.gif"); }

  .footer {
    text-align: center; padding: 14px; font-size: 11px; color: rgba(0,0,0,0.5);
    background: rgba(255,255,255,0.15); border-top: 1px solid rgba(255,255,255,0.2);
    font-weight: 500;
  }

  /* PROVISEUR */
  #proviseur-container {
    position: fixed; right: 2%; bottom: 0;
    display: flex; flex-direction: column; align-items: center;
    z-index: 100; pointer-events: none;
  }

  #proviseur-img {
    height: 60vh; max-height: 520px; width: auto;
    filter: drop-shadow(0 15px 30px rgba(0,0,0,0.3));
    cursor: pointer; pointer-events: auto;
    transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform-origin: bottom center;
  }
  #proviseur-img:hover { transform: scale(1.03) translateY(-5px); }
  #proviseur-img:active { transform: scale(0.95); }

  #bubble {
    background: #fff; color: #2c3e50; padding: 14px 20px; border-radius: 22px;
    font-size: 13px; font-weight: 700; max-width: 250px; text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    margin-bottom: 12px; position: relative;
    opacity: 0; transform: translateY(20px) scale(0.9);
    pointer-events: auto; cursor: pointer;
    border: 2px solid #2c3e50;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  #bubble.visible { opacity: 1; transform: translateY(0) scale(1); }
  #bubble::after {
    content: ''; position: absolute; left: 60%; top: 100%;
    border: 10px solid transparent; border-top-color: #2c3e50;
  }
  #bubble small { display: block; margin-top: 5px; font-weight: 500; font-size: 10px; color: #888; text-transform: uppercase; }

  /* RESPONSIVE */
  @media (max-width: 900px) {
    .games-grid { grid-template-columns: 1fr; }
    #proviseur-img { height: 35vh; }
  }

  @media (max-width: 600px) {
    .game-card { grid-template-columns: 1fr; }
    .card-visual { height: 150px; border-left: none; border-bottom: 1px solid rgba(255,255,255,0.5); order: -1; }
    #main-wrapper { width: 100%; height: 100%; border-radius: 0; border: none; }
    .header h1 { font-size: 22px; }
    
    #proviseur-container { right: 10px; bottom: 10px; align-items: flex-end; }
    #proviseur-img { height: 70px; width: 70px; border-radius: 50%; object-fit: cover; object-position: top; border: 3px solid #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.3); background: #fff; margin-right: 5px;}
    #bubble { font-size: 11px; padding: 10px 14px; margin-bottom: 8px; right: 5px; transform-origin: bottom right; }
  }
</style>
</head>

<body>

<div id="bg-layer"></div>
<div id="bg-overlay"></div>

<div id="main-wrapper">
  
  <header class="header">
    <img id="logo" src="Logo.gif" alt="BTS CIEL" onerror="this.style.display='none'">
    <h1>Arcade BTS CIEL</h1>
    <div id="greeting-text">Hub P√©dagogique</div>
  </header>

  <div class="content-area">
    <div class="games-grid">

      <div class="game-card" onclick="goTo('tetris.html')">
        <div class="card-content">
          <div>
            <div class="card-head">
              <div class="icon-box t-tetris">T</div>
              <div class="card-titles">
                <h3>Tetris</h3>
                <span>Flux & M√©moire</span>
              </div>
            </div>
            <div class="score-box">
              <span>BEST SCORE</span>
              <span class="score-val" id="score-tetris" data-val="0">0000</span>
            </div>
            <p class="card-desc">G√©rez l'empilement des donn√©es. Optimisation de l'espace m√©moire requise.</p>
          </div>
          <button class="play-btn"><span>‚ñ∂</span> Jouer (1)</button>
        </div>
        <div class="card-visual"><div class="v-tetris"></div></div>
      </div>

      <div class="game-card" onclick="goTo('Arkanoid.html')">
        <div class="card-content">
          <div>
            <div class="card-head">
              <div class="icon-box t-arkanoid">A</div>
              <div class="card-titles">
                <h3>Arkanoid</h3>
                <span>Debug Arcade</span>
              </div>
            </div>
            <div class="score-box">
              <span>BEST SCORE</span>
              <span class="score-val" id="score-arkanoid" data-val="0">0000</span>
            </div>
            <p class="card-desc">Destruction de blocs corrompus. Test de latence r√©flexe.</p>
          </div>
          <button class="play-btn"><span>‚ñ∂</span> Jouer (2)</button>
        </div>
        <div class="card-visual"><div class="v-arkanoid"></div></div>
      </div>

      <div class="game-card" onclick="goTo('VoltLink.html')">
        <div class="card-content">
          <div>
            <div class="card-head">
              <div class="icon-box t-volt">V</div>
              <div class="card-titles">
                <h3>VoltLink</h3>
                <span>Loi d'Ohm</span>
              </div>
            </div>
            <div class="score-box">
              <span>BEST SCORE</span>
              <span class="score-val" id="score-volt" data-val="0">0000</span>
            </div>
            <p class="card-desc">Raccordement VCC/GND. √âvitez les court-circuits.</p>
          </div>
          <button class="play-btn"><span>‚ñ∂</span> Jouer (3)</button>
        </div>
        <div class="card-visual"><div class="v-volt"></div></div>
      </div>

      <div class="game-card" onclick="goTo('Bobble.html')">
        <div class="card-content">
          <div>
            <div class="card-head">
              <div class="icon-box t-bubble">B</div>
              <div class="card-titles">
                <h3>Puzzle Bobble</h3>
                <span>Topologie</span>
              </div>
            </div>
            <div class="score-box">
              <span>BEST SCORE</span>
              <span class="score-val" id="score-bubble" data-val="0">0000</span>
            </div>
            <p class="card-desc">Nettoyage de buffer par regroupement de paquets.</p>
          </div>
          <button class="play-btn"><span>‚ñ∂</span> Jouer (4)</button>
        </div>
        <div class="card-visual"><div class="v-bubble"></div></div>
      </div>

    </div>
  </div>

  <footer class="footer">
    D√©partement CIEL ‚Äì Lyc√©e Simone Veil
  </footer>
</div>

<div id="proviseur-container">
  <div id="bubble">Initialisation...</div>
  <img id="proviseur-img" src="proviseur.png" alt="Proviseur">
</div>

<script>
  // --- 1. GREETING ---
  function updateGreeting() {
    const h = new Date().getHours();
    const greet = h < 18 ? "Bonjour." : "Bonsoir.";
    document.getElementById('greeting-text').innerText = greet + " // ACC√àS AUTORIS√â";
  }
  updateGreeting();

  // --- 2. SCORES (CORRIG√â : PLUS DE SUFFIXE SP√âCIAL) ---
  const games = [
    { id: 'tetris', label: 'score-tetris' },
    { id: 'arkanoid', label: 'score-arkanoid' },
    { id: 'volt', label: 'score-volt' }, /* CORRECTION: Suffix retir√© */
    { id: 'bubble', label: 'score-bubble' }
  ];

  function animateValue(obj, start, end, duration, suffix = "") {
    let startTimestamp = null;
    const step = (timestamp) => {
      if (!startTimestamp) startTimestamp = timestamp;
      const progress = Math.min((timestamp - startTimestamp) / duration, 1);
      const value = Math.floor(progress * (end - start) + start);
      obj.innerHTML = value + suffix;
      if (progress < 1) window.requestAnimationFrame(step);
    };
    window.requestAnimationFrame(step);
  }

  function loadScores() {
    games.forEach(game => {
      let savedScore = localStorage.getItem('highScore_' + game.id);
      let targetVal = savedScore ? parseInt(savedScore) : 0; 
      const el = document.getElementById(game.label);
      if(el) animateValue(el, 0, targetVal, 1000, game.suffix || "");
    });
  }

  // --- 3. PARALLAX ---
  const bgLayer = document.getElementById('bg-layer');
  const mainWrapper = document.getElementById('main-wrapper');
  
  document.addEventListener('mousemove', (e) => {
    const x = (window.innerWidth / 2 - e.pageX) / 60;
    const y = (window.innerHeight / 2 - e.pageY) / 60;
    bgLayer.style.transform = `translate(${x}px, ${y}px) scale(1.05)`;
    mainWrapper.style.transform = `perspective(1200px) rotateY(${x * -0.05}deg) rotateX(${y * 0.05}deg)`;
  });

  // --- 4. NAVIGATION ---
  function goTo(url) {
    mainWrapper.style.transform = "scale(0.95) opacity(0)";
    mainWrapper.style.opacity = "0";
    setTimeout(() => { window.location.href = url; }, 200);
  }

  document.addEventListener("keydown", (e) => {
    const k = e.key.toLowerCase();
    if(k === "1" || k === "t") goTo("tetris.html");
    if(k === "2" || k === "a") goTo("Arkanoid.html");
    if(k === "3" || k === "v") goTo("VoltLink.html");
    if(k === "4" || k === "b") goTo("Bobble.html");
  });

  // --- 5. INTERACTION PROVISEUR (SECRET CLICK) ---
  const quotes = [
    "J'esp√®re que le code est comment√©.",
    "Un bug ? Non, une feature.",
    "Score √©lev√© √† Tetris... Et en Maths ?",
    "La pause est bient√¥t finie.",
    "Ctrl+S sauve des vies."
  ];

  const bubble = document.getElementById('bubble');
  const provImg = document.getElementById('proviseur-img');
  let clickCount = 0;
  let clickTimer = null;

  function showBubble(text) {
    bubble.classList.remove('visible');
    setTimeout(() => {
      bubble.innerHTML = text;
      bubble.classList.add('visible');
    }, 100);
  }

  provImg.addEventListener('click', (e) => {
    e.stopPropagation();
    
    // Logique du Secret (5 clics rapides)
    clickCount++;
    clearTimeout(clickTimer);
    clickTimer = setTimeout(() => { clickCount = 0; }, 500); 

    if (clickCount >= 5) {
      showBubble("üï∂Ô∏è MODE ADMIN ACTIV√â üï∂Ô∏è<br><small>Hacking en cours...</small>");
      document.body.style.filter = "hue-rotate(90deg)";
      setTimeout(() => { document.body.style.filter = "none"; }, 1000);
      clickCount = 0;
      return;
    }

    // Comportement normal
    showBubble(quotes[Math.floor(Math.random() * quotes.length)] + "<small>(Cliquer pour changer)</small>");
    provImg.style.transform = "scale(1.05) translateY(-10px)";
    setTimeout(() => provImg.style.transform = "", 200);
  });

  // Message initial
  setTimeout(() => showBubble("Bienvenue au Hub CIEL.<br>Choisissez votre mission."), 800);
  
  loadScores();

</script>
</body>
</html>